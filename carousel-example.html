<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Text Carousel</title>
<style>
  main {
    display: flex;
    justify-content: center;
  }
  .carousel {
    position: relative; /* Ensure proper positioning of items */
    display: flex;
    justify-content: center; /* Center items horizontally */
    align-items: center; /* Center items vertically */
    width: 50%; /* Take 50% of the width */
    height: 80px;
    /*overflow: hidden;*/
    white-space: nowrap;
    border: 1px solid #ccc; /* Add border for visibility */
  }
  .carousel-item {
    margin: 0 10px; /* Adjust spacing between items */
    /*
    position: absolute; 
    opacity: 0;
    */
    transition: opacity 0.3s ease-in-out; /* Smooth opacity transition */
  }
  .carousel-item.active {
    opacity: 1; /* Show active item */
    font-size: 50px;
  }
  .carousel-btn {
    position: absolute;
    top: 50%;
    cursor: pointer;
    background: none;
    border: none;
    font-size: 20px;
  }
  .prev {
    left: 10px; /* Adjust left position */
  }
  .next {
    right: 10px; /* Adjust right position */
  }
</style>
</head>
<body>

<main>
  <div class="carousel" id="textCarousel">
    <!-- Buttons for navigation -->
    <button id="prev" class="carousel-btn prev">&#10094;</button>
    <button id="next" class="carousel-btn next">&#10095;</button>
  </div>
</main>

<h1 id="currentItem"></h1>

<script>
  // Load data from the text file
  fetch('abo-terms.txt')
    .then(response => response.text())
    .then(data => {
      // Split the data into lines
      const lines = data.split('\n');

      // Extract terms, definitions, and categories from each line
      const items = lines.map(line => {
        const [term, def, category] = line.split(':');
        return { term, def, category };
      });

      // Generate carousel items based on categories
      var categories = [...new Set(items.map(item => item.category))]; // Get unique categories
        categories.pop();

      console.log(categories.length)

      const carousel = document.getElementById('textCarousel');

      categories.forEach((category, index) => {
        const item = document.createElement('div');
        item.classList.add('carousel-item');
        if (index === 0) item.classList.add('active');
        item.textContent = category;
        carousel.appendChild(item);
      });


      // Initialize current index and update h1 with current item's text
      let currentIndex = 0;
      document.getElementById('currentItem').textContent = categories[currentIndex];

      // Move carousel function
      function moveCarousel(direction) {
        // Hide current active item
        document.querySelectorAll('.carousel-item')[currentIndex].classList.remove('active');

        // Calculate new index
        currentIndex = (currentIndex + direction + categories.length) % categories.length;
        console.log(currentIndex);

        // Show new active item
        document.querySelectorAll('.carousel-item')[currentIndex].classList.add('active');

        // Update h1 with current item's text
        document.getElementById('currentItem').textContent = categories[currentIndex];
      }
      
      // Event listeners for navigation buttons
      document.getElementById('next').addEventListener("click", function(){
        moveCarousel(1); // Move to the next item
      });
      
      document.getElementById('prev').addEventListener("click", function(){
        moveCarousel(-1); // Move to the previous item
      });
    })
    .catch(error => {
      console.error('Error:', error);
    });
</script>
</body>
</html>
